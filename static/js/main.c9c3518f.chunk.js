(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{37:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},50:function(e,a,t){e.exports=t(61)},55:function(e,a,t){},56:function(e,a,t){},61:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),l=t(18),s=t.n(l),c=(t(55),t(19)),o=t(20),r=t(25),d=t(24),u=t(37),m=t.n(u),p=(t(56),t(10)),h=t(27),v=t.n(h),y=t(42),f=t(78),E=t(77);v.a.accessToken="pk.eyJ1IjoiZmNhaW4iLCJhIjoiY2lnM3F1ZDF2MjF6bHVubTM2Y2QyNHpoeCJ9.443BUaCAuZHIJkNO9rNFrg";var g=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(c.a)(this,t),(n=a.call(this,e)).mapRef=i.a.createRef(),n.state={error:null,isLoaded:!1,covidData:[],daysList:[],totalDays:25,currentDate:""},n.sayHello=n.sayHello.bind(Object(p.a)(n)),n.handleSlideChange=n.handleSlideChange.bind(Object(p.a)(n)),n.displayDate=n.displayDate.bind(Object(p.a)(n)),n}return Object(o.a)(t,[{key:"displayDate",value:function(e){return"day "+e}},{key:"handleSlideChange",value:function(e,a){this.sayHello(a)}},{key:"sayHello",value:function(e){var a=this,t=this.state.daysList[e],n=[],i=new Date(t);this.setState({currentDate:i.toDateString()}),this.state.covidData.forEach((function(e){e.date==t&&n.push(e)}));var l=this.map.querySourceFeatures("counties",{sourceLayer:"counties"});l.forEach((function(e){a.map.setFeatureState({source:"counties",sourceLayer:"counties",id:e.properties.id},{AWATER:0})})),n.forEach((function(e){var t=e.fips;l.forEach((function(n){n.properties.GEOID==t&&a.map.setFeatureState({source:"counties",sourceLayer:"counties",id:n.properties.id},{AWATER:Number(e.cases)})}))}))}},{key:"componentDidMount",value:function(){y.a("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv").then(function(e){this.setState({covidData:e});var a=[];e.map((function(e){a.push(Number(e.cases))}));Math.max.apply(Math,a);var t=[];e.map((function(e){-1===t.indexOf(e.date)&&t.push(e.date)})),this.setState({totalDays:t.length}),this.setState({daysList:t});var n=new Date(t[0]);this.setState({currentDate:n.toDateString()}),this.map=new v.a.Map({container:this.mapRef.current,style:"mapbox://styles/mapbox/dark-v10",center:[-97.8223,37.1253],zoom:4}),this.map.on("load",function(){var e=this;this.map.addSource("counties",{type:"vector",tiles:[window.location.origin+"/covid/tiles/{z}/{x}/{y}.pbf"],minzoom:0,maxzoom:22,promoteId:"id"}),this.map.addLayer({id:"counties",type:"fill",source:"counties","source-layer":"counties",paint:{"fill-color":["step",["feature-state","AWATER"],"white",1,"#faf769",10,"#f5bc4c",100,"#f7983e",500,"#f7723e",1e3,"#f51d1d"],"fill-outline-color":"black","fill-opacity":.45}});this.map.isSourceLoaded("counties")?this.sayHello(0):this.map.on("sourcedata",(function a(t){"counties"===t.sourceId&&t.isSourceLoaded&&(e.sayHello(0),e.map.off("sourcedata",a))}))}.bind(this)),this.map.addControl(new v.a.NavigationControl)}.bind(this))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{id:"map",ref:this.mapRef}),i.a.createElement("div",{id:"slideContainer"},i.a.createElement(f.a,{defaultValue:0,getAriaValueText:this.displayDate,valueLabelFormat:this.displayDate,"aria-labelledby":"discrete-slider",valueLabelDisplay:"on",step:1,marks:!0,min:0,max:this.state.totalDays-1,onChange:this.handleSlideChange})),i.a.createElement(E.a,{className:"dateDisplay",elevation:3},this.state.currentDate),i.a.createElement("div",{class:"map-overlay",id:"legend"},"Cumulative Covid-19 cases per county",i.a.createElement("div",null,i.a.createElement("span",{id:"LegendItem1",className:"legend-key"}),i.a.createElement("span",null,"0-1")),i.a.createElement("div",null,i.a.createElement("span",{id:"LegendItem2",className:"legend-key"}),i.a.createElement("span",null,"1-10")),i.a.createElement("div",null,i.a.createElement("span",{id:"LegendItem3",className:"legend-key"}),i.a.createElement("span",null,"10-100")),i.a.createElement("div",null,i.a.createElement("span",{id:"LegendItem4",className:"legend-key"}),i.a.createElement("span",null,"100-500")),i.a.createElement("div",null,i.a.createElement("span",{id:"LegendItem5",className:"legend-key"}),i.a.createElement("span",null,"500-1000")),i.a.createElement("div",null,i.a.createElement("span",{id:"LegendItem6",className:"legend-key"}),i.a.createElement("span",null,">1000"))))}}]),t}(n.Component),b=function(e){Object(r.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=a.call.apply(a,[this].concat(i))).state={},e}return Object(o.a)(t,[{key:"handleClick",value:function(e){e.preventDefault(),e.stopPropagation(),window.open("https://github.com/nytimes/covid-19-data","_blank")}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement(g,null),i.a.createElement("img",{src:m.a,className:"App-logo",alt:"logo"}),i.a.createElement("svg",{onClick:this.handleClick,className:"css-1tel06d nyt",viewBox:"0 0 16 22"},i.a.createElement("path",{d:"M15.863 13.08c-.687 1.818-1.923 3.147-3.64 3.916v-3.917l2.129-1.958-2.129-1.889V6.505c1.923-.14 3.228-1.609 3.228-3.358C15.45.84 13.32 0 12.086 0c-.275 0-.55 0-.962.14v.14h.481c.824 0 1.51.42 1.51 1.189 0 .63-.48 1.189-1.304 1.189-2.129 0-4.6-1.749-7.279-1.749C2.13.91.481 2.728.481 4.546c0 1.819 1.03 2.448 2.128 2.798v-.14c-.343-.21-.618-.63-.618-1.189 0-.84.756-1.469 1.648-1.469 2.267 0 5.906 1.959 8.172 1.959h.206v2.727l-2.129 1.889 2.13 1.958v3.987c-.894.35-1.786.49-2.748.49-3.502 0-5.768-2.169-5.768-5.806 0-.839.137-1.678.344-2.518l1.785-.769v7.973l3.57-1.608V6.575L3.984 8.953c.55-1.61 1.648-2.728 2.953-3.358v-.07C3.433 6.295 0 9.023 0 13.08c0 4.686 3.914 7.974 8.446 7.974 4.807 0 7.485-3.288 7.554-7.974h-.137z",fill:"#000"}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.c9c3518f.chunk.js.map